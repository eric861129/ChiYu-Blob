{{ define "main" }}
<div class="flex flex-row justify-center py-8">
    <div class="w-full max-w-4xl min-w-0">
        <main>
            <section class="mb-12 sm:mb-16">
                <header class="border-b pb-6 mb-6" style="border-color: var(--border-color);">
                    <h1 class="text-2xl sm:text-4xl font-bold tracking-tight">{{ .Title }}</h1>
                </header>
            </section>
            <section>
                <div class="space-y-8">
                    {{ $day := .Params.day }}
                    {{ if $day }}
                        {{/* 如果有指定日期，顯示該日期的所有文章 */}}
                        {{ $start := time (printf "%sT00:00:00Z" $day) }}
                        {{ $end := $start.AddDate 0 0 1 }}
                    {{/* 先篩選文章類型，再比對日期範圍 */}}
                    {{ $posts := where (where (where .Site.RegularPages "Type" "posts") "Date" ">=" $start) "Date" "<" $end }}
                        {{ $paginator := .Paginate (sort $posts "Date" "desc") }}
                        {{ range $paginator.Pages }}
                            {{ .Render "card" }}
                        {{ end }}
                    {{ else }}
                        {{/* 沒有指定日期，列出所有日期連結 */}}
                        <ul class="list-disc list-inside space-y-2">
                        {{ $dates := slice }}
                        {{ range where .Site.RegularPages "Type" "posts" }}
                            {{ $dates = $dates | append (.Date.Format "2006-01-02") }}
                        {{ end }}
                        {{/* 取得 baseURL 的路徑部分 */}}
                        {{ $base := strings.TrimSuffix ((urls.Parse .Site.BaseURL).Path) "/" }}
                        {{ range sort (uniq $dates) }}
                            {{ $p := printf "%s/%s/" $base (replace . "-" "/") }}
                            <li><a href="{{ $p }}" class="underline">{{ . }}</a></li>
                        {{ end }}
                        </ul>
                    {{ end }}
                </div>
            </section>
            {{ if $day }}
                {{ partial "pagination.html" . }}
            {{ end }}
        </main>
    </div>
    {{ partial "tag_sidebar.html" . }}
    </div>
{{ end }}
