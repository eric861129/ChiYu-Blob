{{ if .Site.Params.Feat.googleTagManager }}
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ .Site.Params.Feat.googleTagManager }}"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
{{ end }}

{{ if .IsHome }}
  <header class="row middle-xs center-xs bg lazyload">
    <div class="col-xs-12">
      {{ partial "logo-img.html" . }}
          {{ with .Site.Params.mdTagline -}}
              {{ (replace (. | markdownify) "{cursor}" "<span class=\"cursor\">|</span>") | safeHTML }}
          {{- else -}}
              <h1>{{ .Site.Params.tagline }}<span class="cursor">|</span></h1>
          {{- end }}
          <noscript>
          <h2>{{ partial "icon" "warning" }}</h2>
          <h2>{{ i18n "noJsMsg" }}</h2>
          </noscript>
        </div>
  </header>
{{ end }}

<nav class="row middle-xs center-xs {{ if not .IsHome -}} nav-fixed nav-shadow {{- end }}">
  <div class="col-xs-6 col-sm-1 logo" style="{{ if not .IsHome }}visibility: visible;{{- end }}">
    <a href="{{ "#" | relLangURL }}">
      {{ partial "lazyimg" (dict 
        "img" (resources.Get .Site.Params.logoSmall)
        "maxsize" (default "96x" site.Params.Image.NavLogo.resize)
        "lqipsize" (default "16x" site.Params.Image.NavLogo.resize)
        "resizeoptions" (default "q92 Gaussian" site.Params.Image.NavLogo.resizeOptions)
        "alt" "Home"
        "renderer" "webp"
        "noscript" false
      ) }}
    </a>
  </div>
  {{ range .Site.Menus.main }}
      <div class="col-xs-3 col-sm-2 nav-item">
        <h3><a href="{{ .URL }}">{{ .Pre }}{{ .Name }}</a></h3>
      </div>
  {{ end }}
  {{ partial "search.html" . }}
  <div class="col-xs-3 col-sm-2 nav-item">
    <!-- 主題切換按鈕 -->
    <button id="theme-toggle" title="切換深色/淺色主題">
      <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="5"></circle>
        <line x1="12" y1="1" x2="12" y2="3"></line>
        <line x1="12" y1="21" x2="12" y2="23"></line>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
        <line x1="1" y1="12" x2="3" y2="12"></line>
        <line x1="21" y1="12" x2="23" y2="12"></line>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
      </svg>
      <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
      </svg>
    </button>
  </div>
  <div class="col-xs-6 col-sm-1 nav-toggle" style="{{ if not .IsHome -}} visibility: visible; {{- end }}">
      <a href="" class="nav-icon" onclick="return false">
        {{ partial "icon" "menu" }}
      </a>
  </div>
</nav>

<section class="nav-full row middle-xs center-xs">
  <div class="col-xs-12">
    <div class="row middle-xs center-xs">
      {{ range .Site.Menus.main }}
        <div class="col-xs-12"><h1><a href="{{ .URL }}">{{ .Pre }}{{ .Name }}</a></h1></div>
      {{ end }}
    </div>
  </div>
</section>
