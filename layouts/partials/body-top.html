{{ if .Site.Params.Feat.googleTagManager }}
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ .Site.Params.Feat.googleTagManager }}"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
{{ end }}

{{ if .IsHome }}
  <header class="row middle-xs center-xs bg lazyload">
    <div class="col-xs-12">
      {{ partial "logo-img.html" . }}
          {{ with .Site.Params.mdTagline -}}
              {{ (replace (. | markdownify) "{cursor}" "<span class=\"cursor\">|</span>") | safeHTML }}
          {{- else -}}
              <h1>{{ .Site.Params.tagline }}<span class="cursor">|</span></h1>
          {{- end }}
          <noscript>
          <h2>{{ partial "icon" "warning" }}</h2>
          <h2>{{ i18n "noJsMsg" }}</h2>
          </noscript>
        </div>
  </header>
{{ end }}

<nav class="row middle-xs center-xs {{ if not .IsHome -}} nav-fixed nav-shadow {{- end }}">
  <div class="col-xs-6 col-sm-1 logo" style="{{ if not .IsHome }}visibility: visible;{{- end }}">
    <a href="{{ "#" | relLangURL }}">
      {{ partial "lazyimg" (dict 
        "img" (resources.Get .Site.Params.logoSmall)
        "maxsize" (default "96x" site.Params.Image.NavLogo.resize)
        "lqipsize" (default "16x" site.Params.Image.NavLogo.resize)
        "resizeoptions" (default "q92 Gaussian" site.Params.Image.NavLogo.resizeOptions)
        "alt" "Home"
        "renderer" "webp"
        "noscript" false
      ) }}
    </a>
  </div>
  {{ range .Site.Menus.main }}
      <div class="col-xs-3 col-sm-2 nav-item">
        <h3><a href="{{ .URL }}">{{ .Pre }}{{ .Name }}</a></h3>
      </div>
  {{ end }}
  {{ partial "search.html" . }}
  <div class="col-xs-3 col-sm-2 nav-item">
    <button id="theme-toggle" aria-label="切換主題">
      <svg class="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M12 9a3 3 0 100 6 3 3 0 000-6zm0-2a5 5 0 110 10 5 5 0 010-10zM12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path></svg>
      <svg class="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M11.99 2.007a9.993 9.993 0 018.15 4.312 9.993 9.993 0 01-4.312 8.15 9.993 9.993 0 01-9.936-9.936A9.993 9.993 0 0111.99 2.007z"></path></svg>
    </button>
  </div>
  <div class="col-xs-6 col-sm-1 nav-toggle" style="{{ if not .IsHome -}} visibility: visible; {{- end }}">
      <a href="" class="nav-icon" onclick="return false">
        {{ partial "icon" "menu" }}
      </a>
  </div>
</nav>

<section class="nav-full row middle-xs center-xs">
  <div class="col-xs-12">
    <div class="row middle-xs center-xs">
      {{ range .Site.Menus.main }}
        <div class="col-xs-12"><h1><a href="{{ .URL }}">{{ .Pre }}{{ .Name }}</a></h1></div>
      {{ end }}
    </div>
  </div>
</section>
