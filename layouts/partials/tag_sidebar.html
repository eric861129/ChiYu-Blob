  <div class="sticky top-20" data-pagefind-ignore>
    <div class="mb-8 text-center" data-pagefind-ignore>
      <img src="{{ "/ChiYu-Blob/images/avatar.jpg" | relURL }}" alt="個人大頭貼"
      class="w-32 h-32 rounded-full mx-auto object-cover border-2"
      style="border-color: var(--border-color);" data-pagefind-ignore >
    </div>

    {{/* --- 新增：聯絡我按鈕 --- */}}
    {{ with .Site.Params.email }}
    <div class="text-center mb-8" data-pagefind-ignore>
        <a href="mailto:{{ . }}" class="inline-flex items-center gap-2 px-4 py-2 rounded-full text-white transition-opacity hover:opacity-90" style="background-color: var(--link-color);">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
            <span class="text-sm font-medium">聯絡我</span>
        </a>
    </div>
    {{ end }}
    {{/* --- ↑↑↑ 新增：聯絡我按鈕 ↑↑↑ --- */}}

    {{ partial "calendar.html" . }}

    <h3
      class="text-xl font-bold mb-4 pb-2 border-b"
      style="border-color: var(--border-color)"
    >
      所有標籤
    </h3>
    <div class="flex flex-wrap gap-2">
      {{ range .Site.Taxonomies.tags.ByCount.Reverse }}
      <a href="{{ .Page.RelPermalink }}" class="tag-pill">
        {{ .Page.Title }}
        <span class="ml-1 opacity-75">{{ .Count }}</span>
      </a>
      {{ end }}
    </div>

    {{ if .Site.Params.social }}
    <div class="mt-8">
      <h3
        class="text-xl font-bold mb-4 pb-2 border-b"
        style="border-color: var(--border-color)"
      >
        相關連結
      </h3>
      <div class="flex flex-col space-y-3 mt-4">
        {{ range $name, $url := .Site.Params.social }}
        <a
          href="{{ $url }}"
          target="_blank"
          rel="noopener noreferrer"
          class="transition-colors flex items-center gap-2 group"
          style="color: var(--text-secondary);"
        >
          <span class="group-hover:text-[var(--link-color)] transition-colors">
            {{- if eq $name "GitHub" -}}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
            {{- else if eq $name "LinkedIn" -}}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
            {{- else if eq $name "Threads" -}}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12a7 7 0 1 0-7 7A7 7 0 0 0 19 12z"></path><path d="M12 19a7 7 0 1 1 7-7"></path></svg> 
                {{/* Threads 目前沒有標準 feather icon，暫時用 @ 符號代替，或者可找更像的 SVG */}}
            {{- else if eq $name "CakeResume" -}}
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
            {{- else if eq $name "iThome" -}}
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
            {{- else -}}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
            {{- end -}}
          </span>
          <span class="text-base group-hover:text-[var(--link-color)] transition-colors">{{ $name }}</span>
        </a>
        {{ end }}
      </div>
    </div>
    {{ end }} {{/* --- 新增：系列文章列表 --- */}} {{ with
    .Site.Taxonomies.series.ByCount }}
    <div class="mt-8">
      <h3
        class="text-xl font-bold mb-4 pb-2 border-b"
        style="border-color: var(--border-color)"
      >
        系列文章
      </h3>
      <ul class="space-y-1">
        {{ range . }}
        <li>
          <a href="{{ .Page.Permalink }}" class="flex justify-between">
            <span>{{ .Page.Title }}</span>
            <span class="text-sm">{{ .Count }}</span>
          </a>
        </li>
        {{ end }}
      </ul>
    </div>
    {{ end }} {{/* --- 新增：開源專案列表 --- */}} {{ $projects := where
    site.RegularPages "Type" "in" "projects" }} {{ if $projects }}
    <div class="mt-8">
      <h3
        class="text-xl font-bold mb-4 pb-2 border-b"
        style="border-color: var(--border-color)"
      >
        開源專案
      </h3>
      <ul class="space-y-1">
        {{ range $projects }}
        <li>
          <a href="{{ .Permalink }}">{{ .Title }}</a>
        </li>
        {{ end }}
      </ul>
    </div>
    {{ end }}
  </div>
