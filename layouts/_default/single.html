{{ define "main" }}
<div class="py-8 sm:py-12">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

        <!-- Main Content Area -->
        <div class="lg:col-span-9">
            {{ if and (gt .WordCount 400) .TableOfContents }}
            <div class="flex flex-row gap-8 lg:gap-12">
                <main class="w-full max-w-4xl min-w-0">
                    {{ partial "content-body.html" . }}
                </main>
                <aside class="post-toc-sidebar">
                    <div class="toc-sticky-container">
                        <h3 class="toc-title">本文目錄</h3>
                        {{ .TableOfContents }}
                    </div>
                </aside>
            </div>
            {{ else }}
            <div class="flex justify-center">
                <main class="w-full max-w-4xl min-w-0">
                    {{ partial "content-body.html" . }}
                </main>
            </div>
            {{ end }}
        </div>

        <!-- Unified Desktop Sidebar -->
        <aside class="hidden lg:block lg:col-span-3">
            <div class="sticky top-8 space-y-8">
                {{ partial "sidebar.html" . }}
                {{ partial "calendar.html" . }}
                {{ partial "tag_sidebar.html" . }}
            </div>
        </aside>

    </div>
</div>
{{ end }}
