{{ define "main" }}
<div class="flex flex-row justify-center py-8">
    <div class="w-full max-w-4xl min-w-0">
        <main>
            <section class="text-center mb-12 sm:mb-20">
                <h1 class="py-8 text-3xl sm:text-5xl font-bold tracking-tight mb-4">{{ .Site.Params.description | default "歡迎來到我的部落格" }}</h1>
                <div class="max-w-2xl mx-auto sm:text-lg" style="color: var(--text-secondary);">
                    {{ .Content }}
                </div>
            </section>

            <section>
                <h2 class="text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 border-b pb-3" style="border-color: var(--border-color);">最新文章</h2>

                <div class="space-y-8">
                    {{/* --- ↓↓↓ 依日期與權重排序最新文章 ↓↓↓ --- */}}
                    {{/* 1. 僅從 "posts" 類型篩選文章 */}}
                    {{ $pages := where .Site.RegularPages "Type" "posts" }}
                    {{/* 2. 先依日期降冪，再依權重降冪排序 */}}
                    {{ $sorted := sort $pages "Date" "desc" "Weight" "desc" }}
                    {{/* 3. 取出最新五篇文章 */}}
                    {{ range first 5 $sorted }}
                        {{ .Render "card" }}
                    {{ end }}
                    {{/* --- ↑↑↑ 依日期與權重排序最新文章 ↑↑↑ --- */}}
                </div>
            </section>
        </main>
    </div>
    {{ partial "tag_sidebar.html" . }}
    </div>
{{ end }}
